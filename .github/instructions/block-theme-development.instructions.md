---
name: "Block Theme Development"
description: "Comprehensive best practices and guidance for developing WordPress block themes. This instruction set is designed to be inherited by WordPress block theme repositories across the LightSpeedWP organisation."
applyTo: "**/*.{php,html,json,css,scss,js,jsx,ts,tsx}"
---

## Overview

> âš ï¸ **Scope Notice**: These instructions are intended for **WordPress block theme
> repositories** within the `lightspeedwp` GitHub organisation. They should **not**
> be applied to the `lightspeedwp/.github` community health repository, as that
> repository does not contain WordPress theme code.

This document provides comprehensive best practices and step-by-step guidance for
developing a modern WordPress block theme with a build process. It is designed for
maintainability, performance, accessibility, and seamless integration with the
WordPress ecosystem.

This instruction file serves as the **main entry point** for all block theme
development standards. It references specialised instruction files in the
`block-theme/` subdirectory and links to the WordPress Coding Standards in the
`wpcs/` subdirectory.

---

## ðŸ“‚ Related Instruction Files

This document serves as the **main entry point** for block theme development. For detailed guidance on specific topics, refer to these related instruction files in the same directory:

**Core References:**

- [accessibility.instructions.md](accessibility.instructions.md) â€” Accessibility standards (WCAG 2.2 AA) for patterns, templates, and parts
- [wpcs-php.instructions.md](wpcs-php.instructions.md) â€” PHP coding standards (formatting, naming, security, i18n)
- [javascript.instructions.md](javascript.instructions.md) â€” JavaScript, React, and JSDoc standards
- [wpcs-css.instructions.md](wpcs-css.instructions.md) â€” CSS/SCSS coding standards (naming, specificity, formatting)
- [html-markup.instructions.md](html-markup.instructions.md) â€” HTML markup and template standards

**Additional Resources:**

- [theme-json.instructions.md](theme-json.instructions.md) â€” Theme.json configuration and design systems
- [security-nonce.instructions.md](security-nonce.instructions.md) â€” WordPress nonce implementation patterns
- [naming-conventions.instructions.md](naming-conventions.instructions.md) â€” File and code naming standards
- [reporting.instructions.md](reporting.instructions.md) â€” Report generation and management

---

## 1. Theme Structure

### Directory Layout

- **Root Files:**
  - `style.css` â€” Theme header, global styles, and required metadata.
  - `functions.php` â€” Enqueue assets, add theme support, register menus, and widgets.
  - `theme.json` â€” Block theme configuration for global styles, settings, and block support.
  - `screenshot.png` â€” Theme preview image (1200x900px recommended).

- **Directories:**
  - `templates/` â€” Block-based templates (e.g., `index.html`, `single.html`, `archive.html`, `404.html`).
    - Valid block comments required in all template files
    - Follow block comment syntax: `<!-- wp:block-type -->` and `<!-- /wp:block-type -->`
  - `parts/` â€” Reusable template parts (e.g., `header.html`, `footer.html`, `sidebar.html`).
    - Valid block comments required in all part files
  - `patterns/` â€” Block patterns (PHP or JSON files with header metadata and block markup).
    - Use consistent naming: `namespace/[category]-[name]` (e.g., `lsx/cta-newsletter`)
    - Include Title, Slug, Categories, optional Keywords, and Viewport Width
  - `styles/` â€” Style variations as JSON files that override `theme.json`.
    - Used for dark mode, custom color schemes, or design variations
    - Each file should be a valid `theme.json` style configuration
  - `assets/` (or `src/`) â€” Source files for SCSS, JS, images, fonts, SVGs, etc.
    - Compiled with `@wordpress/scripts` or similar build tool
  - `build/` â€” Compiled CSS/JS output (never edit directly).
    - Auto-generated by build process
    - Always add to `.gitignore`

### Acceptance Criteria

- âœ… Valid block comments in all templates and parts
- âœ… Pattern files include required metadata headers (Title, Slug, Categories)
- âœ… Pattern slug follows format: `namespace/category-name`
- âœ… Patterns include optional but recommended Keywords and Viewport Width
- âœ… All source files properly organized (never mix source and build output)

---

## 2. Build Process

- **Recommended Tools:** Use Vite, Webpack, or `@wordpress/scripts` for:
  - SCSS/SASS to CSS compilation
  - JS/JSX (React) transpilation and bundling
  - Asset optimization (images, fonts, SVGs)
- **Workflow:**
  - Store all source files in `assets/`, output to `build/`.
  - Add a `package.json` with scripts for `build`, `dev`, `lint`, and `format`.
  - Use `.gitignore` to exclude `node_modules/`, `build/`, and other generated files.
  - Use Prettier, ESLint, and Stylelint for code quality.
  - Document build steps in `README.md`.

---

## 3. theme.json Usage

- Define color palette, typography, spacing, and block settings in `theme.json`.
- Use `theme.json` for global styles and to control editor appearance.
- Avoid hardcoding styles in PHP or CSS; prefer `theme.json` for consistency.
- See [theme-json.instructions.md](theme-json.instructions.md) for detailed guidance.
- Reference: [theme.json Reference](https://developer.wordpress.org/block-themes/theme-json/)

---

## 4. Asset Enqueuing

- Enqueue only built assets (from `build/`) in `functions.php`.
- Use `wp_enqueue_block_style` and `wp_enqueue_block_script` for block-specific assets.
- Version assets using file modification time or build hash for cache busting.
- Only load assets when needed (conditional enqueuing).

---

## 5. Block Patterns & Template Parts

### Pattern Development

Store block patterns in `patterns/` directory as PHP or JSON files with metadata headers and block markup.

#### Pattern Structure

- Use descriptive comments to document each section of the pattern
- Follow a logical structure with clear parent-child block relationships
- Group related blocks using the Group block where appropriate
- Use appropriate block variations based on content needs
- Test pattern across different viewport sizes

#### Pattern Registration & Naming

Register patterns using `register_block_pattern()` function with consistent naming:

```php
register_block_pattern(
    'namespace/category-name', // e.g., 'lsx/cta-newsletter'
    array(
        'title'         => __( 'Pattern Title', 'textdomain' ),
        'description'   => __( 'Pattern description', 'textdomain' ),
        'categories'    => array( 'category' ),
        'keywords'      => array( 'keyword1', 'keyword2' ),
        'viewportWidth' => 1200,
        'content'       => '<!-- wp:group --><!-- /wp:group -->',
    )
);
```

**Naming conventions:**

- Format: `namespace/[category]-[name]` (e.g., `lsx/hero-split-image`)
- Use lowercase with hyphens (no underscores)
- Include Title, Slug (with `lsx/` prefix), and Categories
- Provide meaningful keywords for discoverability
- Set `viewportWidth` appropriate for pattern's design

#### Pattern Metadata Headers

Add metadata to pattern PHP files using header comments:

```php
<?php
/**
 * Title: Example Page
 * Slug: lsx/example-page
 * Categories: page
 * Block Types: core/post-content
 * Post Types: page
 * Template Types: front-page, home
 * Viewport width: 1376
 * Inserter: no
 * Keywords: hero, page, template
 */
?>
<!-- wp:group --><!-- /wp:group -->
```

**Supported metadata headers:**

- `Title:` - Pattern display name
- `Slug:` - Pattern identifier (namespace/name format)
- `Categories:` - Pattern categories for organizing in inserter
- `Block Types:` - Restrict to specific block context (e.g., `core/post-content`)
- `Post Types:` - Limit to specific post types (comma-separated)
- `Template Types:` - Associate with specific templates (e.g., `home, front-page`)
- `Viewport width:` - Width for pattern preview
- `Inserter: no` - Hide from inserter, show only in template creation
- `Keywords:` - Additional search keywords (comma-separated)

**Supported template types:** `index`, `home`, `front-page`, `singular`, `single`, `page`, `archive`, `author`, `category`, `taxonomy`, `date`, `tag`, `attachment`, `search`, `privacy-policy`, `404`

#### Using Patterns in Templates

Include patterns in templates or template parts using the pattern block:

```html
<!-- wp:pattern {"slug":"lsx/home-template"} /-->
```

This allows reuse across templates, reducing duplication and improving maintainability.

#### Pattern Content Strategy

- Create patterns with realistic placeholder content (not lorem ipsum)
- Provide guidance for customization in pattern comments
- Consider different use cases and content variations
- Ensure patterns maintain design integrity when content changes
- Use placeholder copy that instructs editors on how to customize
- Ensure proper heading order, lists, and image alt texts
- Provide mobile-first responsive behavior

#### Pattern Styling

- Use `theme.json` variables exclusively for colors, typography, and spacing
- Avoid inline styles or custom CSS within patterns
- Apply consistent spacing throughout the pattern
- Use predefined block styles rather than custom styles
- Test patterns with different color schemes (light/dark modes)

#### Pattern Accessibility

- Maintain proper heading hierarchy within patterns
- Provide alt text placeholders for all images
- Ensure sufficient color contrast for text elements
- Make interactive elements keyboard accessible
- Test patterns with screen readers (NVDA/VoiceOver)

#### Pattern Performance

- Optimize image usage within patterns
- Avoid unnecessary nesting of blocks
- Keep markup clean and minimal
- Consider performance impact of complex patterns
- Test rendering performance on various devices

#### Pattern Reusability & Delivery

- Design patterns to be reusable across different contexts
- Create variations for different use cases when appropriate
- Document pattern dependencies or requirements
- Add pattern previews in documentation with screenshots
- Provide transforms or variations if applicable
- Include teardown instructions (how to remove/replace safely)

### Template Parts

Use `parts/` for reusable template sections:

- Store in `parts/` directory (e.g., `header.html`, `footer.html`, `sidebar.html`)
- Use valid block comments in all part files
- Reference parts in templates using the Template Part block
- Register using `register_block_template_part()` in `functions.php`
- Use semantic HTML and ARIA attributes for accessibility

---

## 6. Accessibility & Performance

- Use semantic HTML in templates and patterns.
- Ensure keyboard navigation and screen reader support.
- Optimize images and use modern formats (WebP, SVG).
- Minimize CSS/JS bundle size; load only what is needed per page.
- Test with accessibility tools (axe, Lighthouse, WAVE).

---

## 7. Coding Standards

All code must follow WordPress coding standards. Reference the following standards files:

- **PHP**: [wpcs-php.instructions.md](wpcs-php.instructions.md)
- **JavaScript**: [javascript.instructions.md](javascript.instructions.md)
- **CSS/SCSS**: [wpcs-css.instructions.md](wpcs-css.instructions.md)
- **HTML**: [html-markup.instructions.md](html-markup.instructions.md)

Use Prettier and ESLint for JS/JSX; Stylelint for CSS/SCSS.
Add `.editorconfig` for consistent indentation and formatting.

---

## 8. Documentation

- Document all custom functions, build steps, and theme features in a `README.md`.
- Include instructions for installing dependencies and running the build process.
- Use inline documentation following WordPress standards:
  - PHP: See [wpcs-php.instructions.md](wpcs-php.instructions.md) for PHPDoc standards
  - JavaScript: See [javascript.instructions.md](javascript.instructions.md) for JSDoc standards
- Reference the main custom instructions file:
  [custom-instructions.md](../custom-instructions.md) for project-wide standards.

---

## 9. Example Build Scripts (package.json)

```json
"scripts": {
  "dev": "wp-scripts start",
  "build": "wp-scripts build",
  "lint": "wp-scripts lint-js",
  "format": "prettier --write ."
}
```

---

## 10. External References

- [Block Themes Overview](https://developer.wordpress.org/block-themes/)
- [theme.json Reference](https://developer.wordpress.org/block-themes/theme-json/)
- [@wordpress/scripts](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-scripts/)
- [WordPress Coding Standards](https://developer.wordpress.org/coding-standards/)

---

## âš ï¸ Important Reminders

- **Never edit built files directly.** Always keep source and build output separate.
- **This instruction set is for WordPress repositories only.** Do not apply these
  standards to the `lightspeedwp/.github` community health repository.
- **Always check for updates.** Reference the dynamic file paths above for the
  latest instruction files.

---

## Dynamic Reference for Additional Instructions

> For the latest and any additional instructions, always check all files in:
>
> - `.github/instructions/block-theme/*.instructions.md` â€” Block theme guidance
> - `.github/instructions/wpcs/*.instructions.md` â€” WordPress Coding Standards
> - `.github/instructions/` â€” All organisation instruction files
>
> This ensures you are following the most up-to-date and project-specific guidelines.
